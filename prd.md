# 貪吃蛇小遊戲 - 特殊方塊版  
## 產品需求文檔 (PRD)  
**版本：1.0.0 | 最後更新：2024年**

---

## 一、產品概述

### 1.1 產品背景
貪吃蛇是一款經典的休閒遊戲，傳統版本僅有單一食物、單調的得分機制，容易讓玩家感到枯燥。為提升遊戲的可玩性、策略性與驚喜感，本產品在經典玩法基礎上，加入**時間觸發型特殊方塊系統**，透過隨機性與週期性事件，創造「逆轉勝」的刺激體驗。

### 1.2 產品定位
- **目標用戶**：休閒遊戲玩家、貪吃蛇愛好者、喜歡挑戰高分的使用者
- **平台**：網頁端（PC / 手機瀏覽器）
- **核心價值**：在經典玩法中注入週期性驚喜，提升重玩價值

### 1.3 產品目標
1. 保留經典貪吃蛇的核心操作與規則
2. 新增三種時間觸發型特殊方塊，增加遊戲變數
3. 提供清晰的視覺反饋與計時器，讓玩家掌握事件節奏
4. 維持遊戲平衡性，不因特殊方塊破壞核心挑戰

---

## 二、功能範圍

### 2.1 核心功能（必須實現）

| 功能模組 | 功能名稱 | 描述 | 優先級 |
|---------|---------|------|--------|
| 基礎遊戲 | 移動控制 | 鍵盤方向鍵 / 手機虛擬按鍵控制蛇頭方向 | P0 |
| 基礎遊戲 | 碰撞判定 | 撞牆 / 撞到自己 → 遊戲結束 | P0 |
| 基礎遊戲 | 食物生成 | 隨機生成普通食物，蛇頭碰到後長度+1、得分+10 | P0 |
| 基礎遊戲 | 分數系統 | 顯示當前分數、最高分（儲存於 localStorage） | P0 |
| 基礎遊戲 | 遊戲狀態 | 開始、暫停、繼續、重新開始 | P0 |
| **特殊系統** | **紅色方塊** | 每10秒定時生成，+10分（雙倍時段+20分），5秒消失 | P0 |
| **特殊系統** | **雙倍得分** | 每20秒啟動，持續15秒，期間所有食物分數×2 | P0 |
| **特殊系統** | **神秘金色** | 遊戲開始1分鐘後，每20秒生成，+500分，8秒消失 | P0 |
| UI反饋 | 計時器面板 | 顯示三種特殊事件的倒數進度條與秒數 | P0 |
| UI反饋 | 特效通知 | 吃到特殊食物/啟動事件時，畫面中央顯示文字特效 | P0 |

### 2.2 原有特殊食物（保留）

| 食物類型 | 效果 | 出現概率 |
|---------|------|---------|
| 金色食物 | +30分，長度+3 | 7% |
| 藍色食物 | +15分，減速20%（5秒） | 7% |
| 紫色食物 | +5分，長度-1（最少3節） | 6% |

### 2.3 後續可擴展功能（建議）

| 功能 | 描述 | 優先級 |
|-----|------|--------|
| 難度選擇 | 慢速/中速/快速，影響基礎速度與生成間隔 | P2 |
| 障礙物模式 | 地圖中隨機生成固定牆壁 | P2 |
| 音效系統 | 吃到食物、遊戲結束、特殊事件音效 | P3 |
| 成就系統 | 累計吃到紅色方塊次數、雙倍時段得分等 | P3 |
| 每日挑戰 | 每日不同特殊規則（如紅色方塊雙倍分數） | P4 |

---

## 三、用戶流程

```
開始頁面
    ↓
點擊「開始遊戲」
    ↓
遊戲進行中
    ├─ 每10秒 → 紅色方塊出現
    ├─ 每20秒 → 雙倍得分時段啟動（15秒）
    └─ 1分鐘後 → 每20秒神秘金色方塊出現
    ↓
撞牆 / 撞到自己
    ↓
顯示遊戲結束畫面 + 本局分數
    ↓
點擊「再玩一次」→ 重置遊戲
```

---

## 四、功能詳細規格

### 4.1 紅色方塊（Red Special）

| 項目 | 規格 |
|-----|------|
| 觸發方式 | 遊戲開始後，每10秒自動生成 |
| 得分 | 10分（雙倍時段為20分） |
| 長度效果 | +1 |
| 存活時間 | 5秒 |
| 視覺特徵 | 紅色、脈衝光效 |
| 計時器 | 進度條10秒循環，顯示下次出現秒數 |

### 4.2 雙倍得分時段（Double Score）

| 項目 | 規格 |
|-----|------|
| 觸發方式 | 遊戲開始後，每20秒自動啟動 |
| 持續時間 | 15秒 |
| 效果 | 所有食物（含特殊）得分×2 |
| 視覺特徵 | 遊戲畫布邊框金色脈衝閃爍 |
| 計時器 | 啟動時顯示剩餘秒數；冷卻時顯示下次啟動秒數 |

### 4.3 神秘金色方塊（Gold Mystery）

| 項目 | 規格 |
|-----|------|
| 解鎖條件 | 遊戲開始後60秒 |
| 觸發方式 | 解鎖後，每20秒自動生成 |
| 得分 | 500分 |
| 長度效果 | +5 |
| 存活時間 | 8秒 |
| 視覺特徵 | 金色、旋轉光效 |
| 計時器 | 解鎖前顯示倒數；解鎖後顯示20秒循環 |

### 4.4 計時器面板

| 項目 | 規格 |
|-----|------|
| 位置 | 右側面板，分數下方 |
| 內容 | 三個獨立計時條，分別對應紅色、雙倍、金色 |
| 更新頻率 | 每秒更新 |
| 狀態表示 | 進度條寬度、數字秒數、顏色標示 |

### 4.5 特效通知系統

| 項目 | 規格 |
|-----|------|
| 觸發時機 | 吃到特殊食物、啟動/結束雙倍時段 |
| 顯示位置 | 畫面正中央 |
| 顯示時間 | 2秒 |
| 動畫 | 淡入 → 停留 → 向上淡出 |
| 顏色 | 對應食物/事件主題色 |

---

## 五、UI/UX 設計規範

### 5.1 視覺風格
- **主色調**：深藍紫色漸層（#1a1a2e → #16213e）
- **強調色**：霓虹藍（#0ea5e9）、翠綠（#10b981）
- **特殊色**：紅（#ef4444）、金（#ffd700）、橙（#f59e0b）
- **字體**：無襯線字體（Arial / sans-serif）

### 5.2 佈局結構
```
┌─────────────────────────────────┐
│            標題欄               │
├─────────────────────────────────┤
│ ┌───────────┐  ┌───────────┐  │
│ │           │  │ 分數面板  │  │
│ │  遊戲畫布 │  ├───────────┤  │
│ │           │  │ 計時器面板│  │
│ │           │  ├───────────┤  │
│ │           │  │ 食物說明  │  │
│ │           │  ├───────────┤  │
│ │           │  │ 控制按鈕  │  │
│ └───────────┘  └───────────┘  │
├─────────────────────────────────┤
│         手機控制區             │
├─────────────────────────────────┤
│          規則說明             │
└─────────────────────────────────┘
```

### 5.3 響應式設計
- **PC版**：遊戲畫布 400×400，雙欄布局
- **平板版**：單欄垂直排列，寬度自適應
- **手機版**：畫布 300×300，顯示虛擬方向鍵

---

## 六、技術規格

### 6.1 前端技術
- **語言**：HTML5、CSS3、JavaScript（ES6+）
- **渲染**：Canvas API
- **儲存**：localStorage（最高分紀錄）
- **兼容性**：Chrome、Firefox、Safari、Edge、行動版瀏覽器

### 6.2 核心邏輯
- **遊戲循環**：setInterval，每秒約6-20幀（依速度）
- **碰撞檢測**：座標比對
- **事件觸發**：基於遊戲開始時間戳（Date.now()）的週期計算
- **食物生成**：隨機座標，避開蛇身

### 6.3 效能要求
- 遊戲循環流暢無卡頓（FPS ≥ 30）
- 計時器更新即時（誤差 < 100ms）
- 無記憶體洩漏（定時器正確清除）

---

## 七、平衡性設計

### 7.1 風險與獎勵
| 事件 | 風險 | 獎勵 | 平衡機制 |
|-----|------|------|---------|
| 紅色方塊 | 無 | +10分 | 頻繁出現，獎勵穩定 |
| 雙倍時段 | 速度可能過快 | 得分效率×2 | 持續15秒，冷卻20秒 |
| 神秘金色 | 可能出現在危險位置 | +500分 | 1分鐘後才解鎖，8秒消失 |

### 7.2 難度曲線
- **前期（0-60秒）**：適應操作，熟悉紅色方塊與雙倍節奏
- **中期（60-120秒）**：神秘金色加入，高分誘因
- **後期（120秒+）**：速度加快，考驗反應與路線規劃

---

## 八、測試要點

### 8.1 功能測試
- [ ] 紅色方塊是否精準每10秒出現
- [ ] 雙倍時段是否精準每20秒啟動、持續15秒
- [ ] 神秘金色是否在60秒後才出現
- [ ] 計時器進度條與實際時間是否同步
- [ ] 暫停時所有計時器與生成事件是否停止
- [ ] 重新開始是否重置所有狀態

### 8.2 邊界測試
- [ ] 蛇長度為3時吃到紫色食物
- [ ] 同時生成特殊食物與普通食物位置重疊
- [ ] 雙倍時段結束瞬間吃到食物
- [ ] 神秘金色出現瞬間遊戲結束

### 8.3 兼容性測試
- [ ] PC 鍵盤控制
- [ ] 手機觸控按鈕
- [ ] 不同螢幕尺寸

---

## 九、版本規劃

| 版本 | 功能 | 預計時程 |
|-----|------|---------|
| v1.0.0 | 基礎遊戲 + 三種特殊方塊 + 計時器 | 已完成 |
| v1.1.0 | 難度選擇、暫停選單 | 待開發 |
| v1.2.0 | 音效系統、震動反饋（手機） | 待開發 |
| v2.0.0 | 障礙物模式、每日挑戰 | 待開發 |

---

## 十、附錄

### 10.1 名詞定義
| 術語 | 說明 |
|-----|------|
| 蛇身 | 由多個格子組成的鏈狀結構 |
| 食物 | 單格物件，蛇頭碰到後觸發效果 |
| 計時器 | 顯示特殊事件倒數的進度條 |
| 雙倍時段 | 全場增益效果，所有食物分數×2 |

### 10.2 參考資料
- 經典貪吃蛇遊戲機制
- 節奏地牢（節奏觸發事件）
- 吸血鬼倖存者（定時寶箱機制）